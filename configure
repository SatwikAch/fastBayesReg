#!/bin/bash
if [ -e "./src/Makevars" ]; then
  rm -f ./src/Makevars
fi

#make the Makevars file
if [ ! -e "./src/Makevars" ]; then
	touch ./src/Makevars
fi

if [ "$(uname)" == "Darwin" ]; then
        echo "PKG_LIBS +=  -L/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/ -lBLAS -lLAPACK

PKG_CPPFLAGS += -DNDEBUG" > ./src/Makevars
elif [ "$(expr substr $(uname -s) 1 5)" == "Linux" ]; then

#   echo "PKG_LIBS += -L/usr/lib/x86_64-linux-gnu/blas/ -lblas -L/usr/lib/x86_64-linux-gnu/lapack/ -llapack" > ./src/Makevars
   if ["$MKLROOT" == ""]; then
      echo "PKG_LIBS += -lRblas -lRlapack" > ./src/Makevars
   else
      echo "PKG_LIBS +=  -L$MKLROOT/lib/intel64 -Wl,--no-as-needed -lmkl_intel_ilp64 -lmkl_gnu_thread -lmkl_core -lgomp -lpthread -lm -ldl" > ./src/Makevars
   fi

fi

